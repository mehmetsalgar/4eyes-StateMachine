 module org.salgar.fsm.pekko.foureyes.command

 var javaPath = "src"
 var umlModel = ""

 Workflow {
    bean = org.salgar.fsm.pekko.xtend.uml.engine.UmlGeneratorStandaloneSetup : setupCommand {
         config = {
             javaGenPath = "build/generated-sources/main/java"
             rootClass = "org.salgar.fsm.pekko.xtend.uml.templates.command.CommandGenerator"
         }
         doInit = true
     }

     component =  org.salgar.fsm.pekko.xtext.reader.XTextReader : commandReader  {
         useJavaClassPath = true
         uriFilter = org.eclipse.xtext.mwe.NameBasedFilter {
             regularExpression = "${umlModel}"
         }

         register = setupCommand
         loadResource = {
             slot = "modelSlot"
         }
     }

    component = org.eclipse.emf.mwe.utils.DirectoryCleaner : commandCleaner {
        directory = "build/generated-sources/main/java"
    }

    component = org.eclipse.xtext.generator.GeneratorComponent : commandGenerator {
        register = setupCommand
         slot = 'modelSlot'
         outlet = {
             path = "build/generated-sources/main/java"
         }
         outlet = {
            outletName = "gen-once"
             path = javaPath
         }
     }
 }